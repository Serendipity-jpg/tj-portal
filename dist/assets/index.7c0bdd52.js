import{_ as B,o as k,d as w,p as M,g as z,f as s,L as E,a as N,r as _,m as L,b as C,q as d,e as l,w as u,c as m,t as T,y as V,n as W}from"./index.c6fbd2d8.js";import{k as j,g as G,l as H,m as J}from"./classDetails.8b3f9a82.js";import"./request.edf84f94.js";const F=c=>(M("data-v-22f61f92"),c=c(),z(),c),K={class:"askCareful"},O=F(()=>s("div",{class:"tit"},"\u63D0\u95EE\u6CE8\u610F\u4E8B\u9879",-1)),P=F(()=>s("div",null,[s("p",null,"\u95EE\u7B54\u7981\u6B62\u8FD9\u4E9B\u63D0\u95EE"),s("p",null,"1\u3001\u7981\u6B62\u53D1\u5E03\u6C42\u804C\u3001\u4EA4\u6613\u3001\u63A8\u5E7F\u3001\u5E7F\u544A\u7C7B\u4E0E\u95EE\u7B54\u65E0\u5173\u4FE1\u606F\u5C06\u4E00\u5F8B\u6E05\u7406\uFF1B"),s("p",null,"2\u3001\u5C3D\u53EF\u80FD\u8BE6\u7EC6\u63CF\u8FF0\u60A8\u7684\u95EE\u9898\uFF0C\u5982\u6807\u9898\u4E0E\u5185\u5BB9\u4E0D\u7B26\uFF0C\u6216\u4E0E\u95EE\u7B54\u65E0\u5173\u7684\u4FE1\u606F\u5C06\u88AB\u5220\u9664\u6263\u5206\uFF1B"),s("p",null,"3\u3001\u95EE\u7B54\u5237\u5C4F\u7528\u6237\u4E00\u5F8B\u51BB\u7ED3\u5E10\u53F7\u3002")],-1)),X=[O,P],Y={__name:"AskCareful",props:{data:{type:Array,default:[]},id:{type:String,default:""}},setup(c){return(g,b)=>(k(),w("div",K,X))}};var Z=B(Y,[["__scopeId","data-v-22f61f92"]]);const ee={class:"askWrapper"},te={class:"container"},se={class:"askCont fx-sb"},oe={class:"formCont bg-wt marg-rt-20 fx-1"},ae=s("div",{class:"title"},"\u53D1\u5E03\u95EE\u9898",-1),le=s("div",{class:"desc"},"\u9009\u62E9\u8BFE\u7A0B\uFF0C\u63D0\u95EE\u5C06\u5F52\u5C5E\u4E8E\u5168\u5C40\u8BFE\u7A0B\uFF1B\u9009\u62E9\u5206\u7C7B\uFF08\u59821.1\uFF09\u65F6\uFF0C\u7B14\u8BB0\u5F52\u5C5E\u4E8E\u5206\u9879\u4E8E\u5206\u7C7B\u3002",-1),ne={class:"fx-sb fx-al-ct"},re={class:"subCont"},ce={__name:"index",setup(c){const g=E(),b=N(),i=g.query,f=_("add");L(()=>{S(),t.courseId=i.id,i.type&&i.type=="edit"&&(f.value="edit",$())});const I=_(),D={expandTrigger:"hover"},v=_([]),t=C({courseId:"",chapterId:"",sectionId:"",title:"",anonymity:!1,description:""});let x=_([]);const S=async()=>{await j(i.value.id).then(o=>{if(o.code==200){const{data:e}=o,a=e.map(n=>({value:n.id,label:n.name,children:n.sections.map(p=>({value:p.id,label:p.name}))}));x.value=a}else d({message:o.msg,type:"error"})}).catch(()=>{d({message:"\u8BFE\u7A0B\u7AE0\u8282\u6570\u636E\u8BF7\u6C42\u51FA\u9519\uFF01",type:"error"})})},$=async()=>{await G(i.value.id).then(o=>{if(o.code==200){const{data:e}=o;t.courseId=e.courseId,t.chapterId=e.chapterId,t.sectionId=e.sectionId,t.title=e.title,t.anonymity=e.anonymity,t.description=e.description,t.id=e.id,v.value=[e.chapterId,e.sectionId]}else d({message:o.msg,type:"error"})}).catch(()=>{d({message:"\u8BFE\u7A0B\u95EE\u9898\u6570\u636E\u8BF7\u6C42\u51FA\u9519\uFF01",type:"error"})})},A=C({}),y=_(!1),h=()=>{const o={...t};let e=!0;for(let a in o)o[a]==""&&a!="anonymity"&&(e=!1);y.value=e},Q=o=>{t.chapterId=o[0],t.sectionId=o[1],h()},R=o=>{!y.value||o.validate(async e=>{if(e)await(f=="edit"?H:J)(t).then(n=>{n.code==200?b.push({path:"/result/success",query:"\u67E5\u770B\u6211\u7684\u95EE\u9898"}):d({message:n.msg,type:"error"})}).catch(()=>{d({message:f=="edit"?"\u95EE\u9898\u4FEE\u6539\u51FA\u9519\uFF01":"\u95EE\u9898\u53D1\u5E03\u51FA\u9519\uFF01",type:"error"})});else return console.log("error submit!"),!1})};return(o,e)=>{const a=m("el-form-item"),n=m("el-cascader"),p=m("el-input"),U=m("el-checkbox"),q=m("el-form");return k(),w("div",ee,[s("div",te,[s("div",se,[s("div",oe,[ae,l(q,{ref_key:"ruleFormRef",ref:I,model:t,"status-icon":"",rules:A,"label-width":"80px",class:"demo-ruleForm","label-position":"left"},{default:u(()=>[l(a,{label:"\u63D0\u95EE\u8BFE\u7A0B:"},{default:u(()=>[s("span",null,T(V(i).title),1)]),_:1}),l(a,{label:"\u63D0\u95EE\u7AE0\u8282:",prop:"pass"},{default:u(()=>[s("div",null,[l(n,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=r=>v.value=r),options:V(x),props:D,onChange:Q},null,8,["modelValue","options"]),le])]),_:1}),l(a,{label:"\u95EE\u9898\u6807\u9898:",prop:"title"},{default:u(()=>[l(p,{modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=r=>t.title=r),modelModifiers:{number:!0},maxlength:"64",onInput:h,"show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),l(a,{label:"\u95EE\u9898\u63CF\u8FF0:",prop:"description"},{default:u(()=>[l(p,{modelValue:t.description,"onUpdate:modelValue":e[2]||(e[2]=r=>t.description=r),rows:"11",type:"textarea",onInput:h,maxlength:"500","show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),l(a,null,{default:u(()=>[s("div",ne,[s("div",null,[l(U,{modelValue:t.anonymity,"onUpdate:modelValue":e[3]||(e[3]=r=>t.anonymity=r),label:"\u662F\u5426\u533F\u540D",size:"large"},null,8,["modelValue"])]),s("div",re,[s("span",{class:W(["bt ft-14",{"bt-dis":!y.value}]),onClick:e[4]||(e[4]=r=>R(I.value))},"\u53D1\u5E03",2)])])]),_:1})]),_:1},8,["model","rules"])]),l(Z)])])])}}};export{ce as default};
